{"version":3,"file":"CheckoutProvider.js","sources":["../../../src/checkout/components/CheckoutProvider.tsx"],"sourcesContent":null,"names":["emptyContext","CheckoutContext","createContext","useCheckoutContext","context","useContext","Error","CheckoutProvider","chargeHandler","children","isSponsored","onStatus","productId","config","appearance","paymaster","name","undefined","logo","useOnchainKit","address","chainId","isConnected","useAccount","connectAsync","useConnect","switchChainAsync","useSwitchChain","chargeId","setChargeId","useState","transactionId","setTransactionId","errorMessage","setErrorMessage","isSmartWallet","useIsWalletACoinbaseSmartWallet","sendAnalytics","useAnalytics","fetchedDataUseEffect","useRef","fetchedDataHandleSubmit","userRejectedRef","contractsRef","insufficientBalanceRef","priceInUSDCRef","lifecycleStatus","updateLifecycleStatus","useLifecycleStatus","statusName","CHECKOUT_LIFECYCLESTATUS","INIT","statusData","fetchContracts","useCommerceContracts","fetchData","useCallback","FETCHING_DATA","contracts","hydratedChargeId","insufficientBalance","priceInUSDC","error","GENERIC_ERROR_MESSAGE","ERROR","code","CheckoutErrorCode","UNEXPECTED_ERROR","message","current","READY","status","writeContractsAsync","useWriteContracts","mutation","onSuccess","id","data","useCallsStatus","query","refetchInterval","state","enabled","transactionHash","receipts","receipt","useWaitForTransactionReceipt","hash","useEffect","PENDING","SUCCESS","transactionReceipts","receiptUrl","handleAnalytics","event","handleSubmit","CheckoutEvent","CheckoutInitiated","amount","Number","window","open","USER_REJECTED_ERROR","connectedAddress","connectedChainId","accounts","_connectedChainId","connector","coinbaseWallet","appName","appLogoUrl","preference","NO_CONNECTED_ADDRESS_ERROR","base","height","width","getWindowDimensions","openPopup","url","target","length","NO_CONTRACTS_ERROR","capabilities","paymasterService","CheckoutFailure","metadata","JSON","stringify","isUserRejectedError","includes","isUserRejectedRequestError","errorCode","value","useValue","onSubmit","_jsx","Provider"],"mappings":"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"}